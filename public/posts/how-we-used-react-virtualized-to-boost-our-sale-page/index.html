

<!DOCTYPE html>
<html lang="fr-fr">

<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="robots" content="noodp" /><title>How We Used React Virtualized to Boost Our Sale Page - François Petitit</title><meta name="Description" content="François Petitit"><meta property="og:title" content="How We Used React Virtualized to Boost Our Sale Page" />
<meta property="og:description" content="This article was previously published here : https://medium.com/la-ruche-qui-dit-oui/how-we-used-react-virtualized-to-boost-our-sale-page-6e2f087039ca
How we used React Virtualized to boost our sale pageOur mission at La Ruche qui dit Oui ! is to provide good and fair products to our customers, directly from farmers and craftsmen.
Since last year, we have been working to improve and expand our product offerings, bringing more and more producers and more and more products to our customers.
Challenges arise at many levels: logistics, communication, marketing, but also the user experience offered by our website." />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://localhost:1313/posts/how-we-used-react-virtualized-to-boost-our-sale-page/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2018-07-18T09:52:49+02:00" />
<meta property="article:modified_time" content="2018-07-18T09:52:49+02:00" />
<meta name="twitter:card" content="summary"/><meta name="twitter:title" content="How We Used React Virtualized to Boost Our Sale Page"/>
<meta name="twitter:description" content="This article was previously published here : https://medium.com/la-ruche-qui-dit-oui/how-we-used-react-virtualized-to-boost-our-sale-page-6e2f087039ca
How we used React Virtualized to boost our sale pageOur mission at La Ruche qui dit Oui ! is to provide good and fair products to our customers, directly from farmers and craftsmen.
Since last year, we have been working to improve and expand our product offerings, bringing more and more producers and more and more products to our customers.
Challenges arise at many levels: logistics, communication, marketing, but also the user experience offered by our website."/>
<meta name="application-name" content="François Petitit">
<meta name="apple-mobile-web-app-title" content="François Petitit">

<meta name="theme-color" content="#f8f8f8"><link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" />
        <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
        <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">

<link rel="canonical" href="http://localhost:1313/posts/how-we-used-react-virtualized-to-boost-our-sale-page/" /><link rel="prev" href="http://localhost:1313/posts/paris-web-openid-connect-france-connect/" /><link rel="next" href="http://localhost:1313/posts/writing-a-new-blog-with-hugo/" />
<link rel="stylesheet" href="/css/main.min.css"><link rel="stylesheet" href="/css/style.min.css"><link rel="preload" as="style" onload="this.onload=null;this.rel='stylesheet'" href="/lib/animate/animate.min.css">
        <noscript><link rel="stylesheet" href="/lib/animate/animate.min.css"></noscript><script type="application/ld+json">{"@context": "https://schema.org","@type": "BlogPosting",
        "headline": "How We Used React Virtualized to Boost Our Sale Page",
        "inLanguage": "fr-fr",
        "mainEntityOfPage": {
            "@type": "WebPage",
            "@id": "http://localhost:1313/posts/how-we-used-react-virtualized-to-boost-our-sale-page/"
        },"genre": "posts","wordcount":  1460 ,
        "url": "http://localhost:1313/posts/how-we-used-react-virtualized-to-boost-our-sale-page/","datePublished": "2018-07-18T09:52:49+02:00","dateModified": "2018-07-18T09:52:49+02:00","publisher": {
            "@type": "Organization",
            "name": "Author"},"author": {
                "@type": "Person",
                "name": "Author",
                "url": "/"
            },"description": ""
    }</script></head>

<body header-desktop="" header-mobile=""><script type="text/javascript">
        function setTheme(theme) {
          document.body.setAttribute('theme', theme); 
          document.documentElement.style.setProperty('color-scheme', theme === 'light' ? 'light' : 'dark');
          if (theme === 'light') {
            document.documentElement.classList.remove('tw-dark')
          } else {
            document.documentElement.classList.add('tw-dark')
          }
          window.theme = theme;   
          window.isDark = window.theme !== 'light' 
        }
        function saveTheme(theme) {window.localStorage && localStorage.setItem('theme', theme);}
        function getMeta(metaName) {const metas = document.getElementsByTagName('meta'); for (let i = 0; i < metas.length; i++) if (metas[i].getAttribute('name') === metaName) return metas[i]; return '';}
        if (window.localStorage && localStorage.getItem('theme')) {let theme = localStorage.getItem('theme');theme === 'light' || theme === 'dark' || theme === 'black' ? setTheme(theme) : (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches ? setTheme('dark') : setTheme('light')); } else { if ('' === 'light' || '' === 'dark' || '' === 'black') setTheme(''), saveTheme(''); else saveTheme('auto'), window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches ? setTheme('dark') : setTheme('light');}
        let metaColors = {'light': '#f8f8f8','dark': '#252627','black': '#000000'}
        getMeta('theme-color').content = metaColors[document.body.getAttribute('theme')];
        window.switchThemeEventSet = new Set()
    </script>
    <div id="back-to-top"></div>
    <div id="mask"></div><div class="wrapper"><header class="desktop print:!tw-hidden" id="header-desktop">
    <div class="header-wrapper">
        <div class="header-title">
            <a href="/" title="François Petitit">François Petitit</a>
        </div>
        <div class="menu">
            <div class="menu-inner"><a class="menu-item"
                    href="/posts/" > Post </a><a class="menu-item"
                    href="/about/" > About </a><span class="menu-item delimiter"></span><button class="menu-item theme-switch" aria-label="Switch Theme">
                    <svg class="icon"
    xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!-- Font Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) --><path d="M8 256c0 136.966 111.033 248 248 248s248-111.034 248-248S392.966 8 256 8 8 119.033 8 256zm248 184V72c101.705 0 184 82.311 184 184 0 101.705-82.311 184-184 184z"/></svg>
                </button></div>
        </div>
    </div>
</header><header class="mobile print:!tw-hidden" id="header-mobile">
    <div class="header-container">
        <div class="header-wrapper">
            <div class="header-title">
                <a href="/" title="François Petitit">François Petitit</a>
            </div>
            <div class="menu-toggle" id="menu-toggle-mobile">
                <span></span><span></span><span></span>
            </div>
        </div>
        <div class="menu" id="menu-mobile"><a class="menu-item" href="/posts/" title="" >Post</a><a class="menu-item" href="/about/" title="" >About</a><button class="menu-item theme-switch tw-w-full" aria-label="Switch Theme">
                <svg class="icon"
    xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!-- Font Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) --><path d="M8 256c0 136.966 111.033 248 248 248s248-111.034 248-248S392.966 8 256 8 8 119.033 8 256zm248 184V72c101.705 0 184 82.311 184 184 0 101.705-82.311 184-184 184z"/></svg>
            </button></div>
    </div>
</header>
<div class="search-dropdown desktop">
    <div id="search-dropdown-desktop"></div>
</div>
<div class="search-dropdown mobile">
    <div id="search-dropdown-mobile"></div>
</div><main class="main">
            <div class="container"><article class="page single print:!tw-w-full print:!tw-max-w-none print:!tw-m-0 print:!tw-p-0"><h1 class="single-title animate__animated animate__flipInX">How We Used React Virtualized to Boost Our Sale Page</h1><div class="post-meta">
            <div class="post-meta-line">
                <span class="post-author"><svg class="icon"
    xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!-- Font Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) --><path d="M248 8C111 8 0 119 0 256s111 248 248 248 248-111 248-248S385 8 248 8zm0 96c48.6 0 88 39.4 88 88s-39.4 88-88 88-88-39.4-88-88 39.4-88 88-88zm0 344c-58.7 0-111.3-26.6-146.5-68.2 18.8-35.4 55.6-59.8 98.5-59.8 2.4 0 4.8.4 7.1 1.1 13 4.2 26.6 6.9 40.9 6.9 14.3 0 28-2.7 40.9-6.9 2.3-.7 4.7-1.1 7.1-1.1 42.9 0 79.7 24.4 98.5 59.8C359.3 421.4 306.7 448 248 448z"/></svg><a href="/" title="Author" rel=" author" class="author">Author</a>
                </span></div>
            <div class="post-meta-line"><svg class="icon"
    xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!-- Font Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) --><path d="M148 288h-40c-6.6 0-12-5.4-12-12v-40c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12zm108-12v-40c0-6.6-5.4-12-12-12h-40c-6.6 0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h40c6.6 0 12-5.4 12-12zm96 0v-40c0-6.6-5.4-12-12-12h-40c-6.6 0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h40c6.6 0 12-5.4 12-12zm-96 96v-40c0-6.6-5.4-12-12-12h-40c-6.6 0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h40c6.6 0 12-5.4 12-12zm-96 0v-40c0-6.6-5.4-12-12-12h-40c-6.6 0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h40c6.6 0 12-5.4 12-12zm192 0v-40c0-6.6-5.4-12-12-12h-40c-6.6 0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h40c6.6 0 12-5.4 12-12zm96-260v352c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V112c0-26.5 21.5-48 48-48h48V12c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v52h128V12c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v52h48c26.5 0 48 21.5 48 48zm-48 346V160H48v298c0 3.3 2.7 6 6 6h340c3.3 0 6-2.7 6-6z"/></svg>&nbsp;<time datetime="2018-07-18">2018-07-18</time>&nbsp;<svg class="icon"
    xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><!-- Font Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) --><path d="M402.3 344.9l32-32c5-5 13.7-1.5 13.7 5.7V464c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V112c0-26.5 21.5-48 48-48h273.5c7.1 0 10.7 8.6 5.7 13.7l-32 32c-1.5 1.5-3.5 2.3-5.7 2.3H48v352h352V350.5c0-2.1.8-4.1 2.3-5.6zm156.6-201.8L296.3 405.7l-90.4 10c-26.2 2.9-48.5-19.2-45.6-45.6l10-90.4L432.9 17.1c22.9-22.9 59.9-22.9 82.7 0l43.2 43.2c22.9 22.9 22.9 60 .1 82.8zM460.1 174L402 115.9 216.2 301.8l-7.3 65.3 65.3-7.3L460.1 174zm64.8-79.7l-43.2-43.2c-4.1-4.1-10.8-4.1-14.8 0L436 82l58.1 58.1 30.9-30.9c4-4.2 4-10.8-.1-14.9z"/></svg>&nbsp;<time datetime="2018-07-18">2018-07-18</time>&nbsp;<svg class="icon"
    xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!-- Font Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) --><path d="M497.9 142.1l-46.1 46.1c-4.7 4.7-12.3 4.7-17 0l-111-111c-4.7-4.7-4.7-12.3 0-17l46.1-46.1c18.7-18.7 49.1-18.7 67.9 0l60.1 60.1c18.8 18.7 18.8 49.1 0 67.9zM284.2 99.8L21.6 362.4.4 483.9c-2.9 16.4 11.4 30.6 27.8 27.8l121.5-21.3 262.6-262.6c4.7-4.7 4.7-12.3 0-17l-111-111c-4.8-4.7-12.4-4.7-17.1 0zM124.1 339.9c-5.5-5.5-5.5-14.3 0-19.8l154-154c5.5-5.5 14.3-5.5 19.8 0s5.5 14.3 0 19.8l-154 154c-5.5 5.5-14.3 5.5-19.8 0zM88 424h48v36.3l-64.5 11.3-31.1-31.1L51.7 376H88v48z"/></svg>&nbsp;1460 words&nbsp;<svg class="icon"
    xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!-- Font Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) --><path d="M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm0 448c-110.5 0-200-89.5-200-200S145.5 56 256 56s200 89.5 200 200-89.5 200-200 200zm61.8-104.4l-84.9-61.7c-3.1-2.3-4.9-5.9-4.9-9.7V116c0-6.6 5.4-12 12-12h32c6.6 0 12 5.4 12 12v141.7l66.8 48.6c5.4 3.9 6.5 11.4 2.6 16.8L334.6 349c-3.9 5.3-11.4 6.5-16.8 2.6z"/></svg>&nbsp;7 minutes&nbsp;</div>
        </div><div class="content" id="content"><p>This article was previously published here : <a href="https://medium.com/la-ruche-qui-dit-oui/how-we-used-react-virtualized-to-boost-our-sale-page-6e2f087039ca" target="_blank" rel="noopener noreferrer">https://medium.com/la-ruche-qui-dit-oui/how-we-used-react-virtualized-to-boost-our-sale-page-6e2f087039ca</a></p>
<h1 id="how-we-used-react-virtualized-to-boost-our-sale-page" class="headerLink">
    <a href="#how-we-used-react-virtualized-to-boost-our-sale-page" class="header-mark"></a>How we used React Virtualized to boost our sale page</h1><p>Our mission at <a href="https://laruchequiditoui.fr/fr" target="_blank" rel="noopener noreferrer">La Ruche qui dit Oui !</a> is to provide good and fair products to our customers, directly from farmers and craftsmen.</p>
<p>Since last year, we have been working to improve and expand our product offerings, bringing more and more producers and more and more products to our customers.</p>
<p>Challenges arise at many levels: logistics, communication, marketing, but also the user experience offered by our website.</p>
<p>This article focuses on what we did, as Web developers, to handle more and more farmers and more and more products on our new sale page :</p>
<p><figure><img
        
        loading="lazy"
        src="/posts/how-we-used-react-virtualized-to-boost-our-sale-page/image.png"
        srcset="/posts/how-we-used-react-virtualized-to-boost-our-sale-page/image.png 1279w,
            /posts/how-we-used-react-virtualized-to-boost-our-sale-page/image.png 1279w,
            /posts/how-we-used-react-virtualized-to-boost-our-sale-page/image.png 1279w"
        title="Our new sale page" height="982"   width="1279" ><figcaption class="image-caption">Our new sale page</figcaption>
    </figure></p>
<p>But before getting to the code, let’s see what we wanted to change on this page.</p>
<h2 id="the-old-sale-page-why-we-chose-to-abandon-it" class="headerLink">
    <a href="#the-old-sale-page-why-we-chose-to-abandon-it" class="header-mark"></a>The old sale page: why we chose to abandon it</h2><p>The sale page looked like that, until the last few weeks:</p>
<p><figure><img
        
        loading="lazy"
        src="/posts/how-we-used-react-virtualized-to-boost-our-sale-page/image-1.png"
        srcset="/posts/how-we-used-react-virtualized-to-boost-our-sale-page/image-1.png 1147w,
            /posts/how-we-used-react-virtualized-to-boost-our-sale-page/image-1.png 1147w,
            /posts/how-we-used-react-virtualized-to-boost-our-sale-page/image-1.png 1147w"
        title="Farewell, old page" height="723"   width="1147" ><figcaption class="image-caption">Farewell, old page</figcaption>
    </figure></p>
<p>When this page was designed and implemented, there were only dozens or a few hundreds products per sale. It worked fine at the beginning, but as the number of offers was growing up, we identified some limitations that were problematic:</p>
<ul>
<li>a fundamental pattern of our navigation wasn’t understood by the user, especially the newcomers: the products are ordered by farms (because we want to highlight our farmers). Some users dropped their orders or had to spend more time to compare the products, and as you know, on a e-commerce website, more time means less sales…</li>
<li>on iOS devices, the browser crashed when there were too many products — due to a lack of memory. We used a pagination but it made the sale harder to navigate.</li>
<li>on large screens, the products were also displayed by batches of 20: when the user was coming to a category, the first 20 were displayed, then when the user scrolled to the bottom, the next 20 were added at the bottom of the list, and so on. Fast scrolling navigation was a bit jerky.</li>
<li>on large screen, the page didn’t use all the width of the page: it was a shame because we could have displayed more products.</li>
<li>access to categories, subcategories and organic filters was only possible when the user was on top of the page. Discovering the whole range of products was not easy and organic filters deserved to be more visible.</li>
</ul>
<p>So, we needed to improve the discoverability of the whole catalog, and the navigation inside it.</p>
<p>After a few weeks of user testing and design adjustments, we finally decided to implement this new page:</p>
<p><figure><img
        
        loading="lazy"
        src="/posts/how-we-used-react-virtualized-to-boost-our-sale-page/image-2.png"
        srcset="/posts/how-we-used-react-virtualized-to-boost-our-sale-page/image-2.png 1279w,
            /posts/how-we-used-react-virtualized-to-boost-our-sale-page/image-2.png 1279w,
            /posts/how-we-used-react-virtualized-to-boost-our-sale-page/image-2.png 1279w"
        title="The home screen of the new sale page : a selection of products" height="982"   width="1279" ><figcaption class="image-caption">The home screen of the new sale page : a selection of products</figcaption>
    </figure></p>
<p>The main technical challenge of the new sale page was the “all products” category:</p>
<p><figure><img
        
        loading="lazy"
        src="/posts/how-we-used-react-virtualized-to-boost-our-sale-page/image-3.png"
        srcset="/posts/how-we-used-react-virtualized-to-boost-our-sale-page/image-3.png 1280w,
            /posts/how-we-used-react-virtualized-to-boost-our-sale-page/image-3.png 1280w,
            /posts/how-we-used-react-virtualized-to-boost-our-sale-page/image-3.png 1280w"
        title="The “All products” category" height="960"   width="1280" ><figcaption class="image-caption">The “All products” category</figcaption>
    </figure></p>
<p>As you may guess viewing the screenshot, there are now 2 ways to navigate inside a category:</p>
<ul>
<li>the user can scroll into the products list, from the first product to the last one (sometimes there are more than 2000 products).</li>
<li>or the user can click on a farm in the farms list on the left side: the list will automatically scroll up or down to the first product of the farmer.</li>
</ul>
<p>So, let’s see how we handled displaying long lists and browsing into them in our code.</p>
<h2 id="handle-long-list-with-react--react-virtualized" class="headerLink">
    <a href="#handle-long-list-with-react--react-virtualized" class="header-mark"></a>Handle long list with React : React-virtualized</h2><p>At La Ruche qui dit Oui !, we chose about 2 years ago to develop all our new Web front-end features with React.</p>
<p>React is very powerful to manipulate the DOM efficiently thanks to its use of shadow DOM. We aim to provide the most fluid and responsive interfaces thanks to React.</p>
<p>In its documentation, React provides some guidelines to optimize performances. In particular, there is a paragraph about “Virtualize Long Lists” :</p>
<blockquote>
<p>Virtualize Long Lists</p>
<p>If your application renders long lists of data (hundreds or thousands of rows), we recommended using a technique known as “windowing”. This technique only renders a small subset of your rows at any given time, and can dramatically reduce the time it takes to re-render the components as well as the number of DOM nodes created.</p>
<p>React Virtualized is one popular windowing library. It provides several reusable components for displaying lists, grids, and tabular data. You can also create your own windowing component, like Twitter did, if you want something more tailored to your application’s specific use case.</p>
</blockquote>
<p>Windowing is pretty easy to understand with the capture below, displaying the content of the DOM at a precise moment : only a dozen of rows are rendered into the DOM, no matter the total number of rows. React Virtualized will remove the rows that are no longer visible and add the newly visible each time the user scrolls into the page.</p>
<p><figure><img
        
        loading="lazy"
        src="/posts/how-we-used-react-virtualized-to-boost-our-sale-page/image-4.png"
        srcset="/posts/how-we-used-react-virtualized-to-boost-our-sale-page/image-4.png 638w,
            /posts/how-we-used-react-virtualized-to-boost-our-sale-page/image-4.png 638w,
            /posts/how-we-used-react-virtualized-to-boost-our-sale-page/image-4.png 638w"
        title="At every moment, only a subset of the whole list is present in the DOM" height="281"   width="638" ><figcaption class="image-caption">At every moment, only a subset of the whole list is present in the DOM</figcaption>
    </figure></p>
<p>So as the documentation mentioned React Virtualized, and as it seemed to handle our use cases, we chose to use it to implement the new features.</p>
<h2 id="how-we-use-react-virtualized" class="headerLink">
    <a href="#how-we-use-react-virtualized" class="header-mark"></a>How we use React Virtualized</h2><p>We managed to isolate all our usage of React Virtualized in only one component, called “ProductsList.jsx”.</p>
<p>Finally, we used 2 components from the library: List and WindowScroller. Our imports look like this:</p>
<script src="https://gist.github.com/fpetitit/775ba62467c257c737f4d413902ab5ab.js"></script>
<p>Note that the explicit path used in the import directives are due to the recommendation from <a href="https://medium.com/la-ruche-qui-dit-oui/how-we-used-react-virtualized-to-boost-our-sale-page-6e2f087039ca#:~:text=the%20recommendation%20from-,here,-and%20could%20be" target="_blank" rel="noopener noreferrer">here</a> and could be removed if you’re using Webpack 4.</p>
<p><code>List</code> allows to display a windowed list of elements.</p>
<p><code>WindowScroller</code> allows the <code>List</code> component to be scrolled based on the window&rsquo;s scroll positions. Also, the scrollbar will reflect the length of the list and the current position.</p>
<p>Now let’s render these components in the <code>render</code> function of our <code>ProductsList</code> component:</p>
<script src="https://gist.github.com/fpetitit/79e217389fb23d42d0789bdedcee53cf.js"></script>
<p>The properties passed to the List component can be divided in 3 parts: the content of the list, the dimensions of the list, and handling the user interactions.</p>
<p>###The content of the list</p>
<p>Giving the content is done by passing a function as the rowRenderer property, that will return the React component corresponding to the index of the desired row:</p>
<script src="https://gist.github.com/fpetitit/499eb8cbe1b32ebef85251b9d6598196.js"></script>
<p>(R is for <a href="http://ramdajs.com/" target="_blank" rel="noopener noreferrer">RamdaJS</a>)</p>
<p>Where farmsAndProductsComponents is a pre-computed array that contains React components displaying either a farmer card or a product card. This part of the code is pretty obvious, but will be complicated to handle the dimension of the list.</p>
<h3 id="handling-the-dimension-of-the-list" class="headerLink">
    <a href="#handling-the-dimension-of-the-list" class="header-mark"></a>Handling the dimension of the list</h3><p>One of the key thing that must be done to handle the scrollbar of the window is to be able to know the size of the entire list.</p>
<p>So we set fixed height to our components, according to their types (farmer card or product card) and the width of the window (the cards heights are bigger on small screen than on large screen), and passed the function as the rowHeight prop:</p>
<script src="https://gist.github.com/fpetitit/5f94f76477670b6db561fb1f885509f7.js"></script>
<h3 id="handling-the-user-interaction" class="headerLink">
    <a href="#handling-the-user-interaction" class="header-mark"></a>Handling the user interaction</h3><p>If we stopped here, the user could scroll into the list, use the scrollbar, and know where it situated into the list.</p>
<p>But we wanted to provide an other way to navigate, by displaying the list of the producers, displaying the current producer (the one corresponding to the first visible product in the screen), and going to an other producer by clicking on its name. This is the purpose of the menu on the left side, in large screen:</p>
<p><figure><img
        
        loading="lazy"
        src="/posts/how-we-used-react-virtualized-to-boost-our-sale-page/image-5.png"
        srcset="/posts/how-we-used-react-virtualized-to-boost-our-sale-page/image-5.png 1290w,
            /posts/how-we-used-react-virtualized-to-boost-our-sale-page/image-5.png 1290w,
            /posts/how-we-used-react-virtualized-to-boost-our-sale-page/image-5.png 1290w"
        title="The producers list in the sticky menu" height="983"   width="1290" ></figure>
The producers list in the sticky menu</p>
<h3 id="displaying-the-current-farm" class="headerLink">
    <a href="#displaying-the-current-farm" class="header-mark"></a>Displaying the current farm</h3><p>To do that, we added a “scrollY” attribute to our list components:</p>
<script src="https://gist.github.com/fpetitit/bd6c592cd76cd7417be8e35078f34a55"></script>
<p>It allowed us to determine the current producer by looking for the first element of the list having a scrollY visible according to <code>window.pageYOffset</code>:</p>
<script src="https://gist.github.com/fpetitit/c9e3de2a22182e9a9995eb94c70847c0.js"></script>
<h3 id="going-to-a-specific-producer" class="headerLink">
    <a href="#going-to-a-specific-producer" class="header-mark"></a>Going to a specific producer</h3><p>Finally, going to a specific producer was done by calculating the position of the producer card by accumulating the heights of the previous components from the list and scrolling to the position:</p>
<script src="https://gist.github.com/fpetitit/60995479f18922d6caf54dcd602376d2.js"></script>
<h3 id="conclusion--the-pros-and-cons-of-react-virtualized" class="headerLink">
    <a href="#conclusion--the-pros-and-cons-of-react-virtualized" class="header-mark"></a>Conclusion : the pros and cons of React Virtualized</h3><p>We are quite happy of our new sale page and React Virtualized was really a great tool to help use prototyping and developing all the features that we wanted.</p>
<p>The performance are very good, it works well on all the browsers that we support, especially on the most difficult to support for us which are IE 11 and Safari Mobile on relatively old iOS devices.</p>
<p>We were concerned by 2 problems until now. Both are due to the fact that the whole list is never present into the DOM:</p>
<ul>
<li>searching into the list by the find function of the browsers (“ctrl + f”) is working only in the visible rows, but we provide a Search functionality in the sale page that the user should use instead of the browser’s function, and that provides more intelligent results</li>
<li>some CSS rules cannot be used, for example selectors like <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/:first-of-type" target="_blank" rel="noopener noreferrer">first-of-type</a></li>
</ul>
<p>If you have faced challenges of the same type, please share your experiences in the comments of this blog post :)</p>
</div>

        <div class="post-footer" id="post-footer">
    <div class="post-info">
        <div class="post-info-line">
            <div class="post-info-mod">
                <span>Updated on 2018-07-18</span>
            </div>
            <div class="post-info-license"></div>
        </div>
        <div class="post-info-line print:!tw-hidden">
            <div class="post-info-md"></div>
            <div class="post-info-share"></div>
        </div>
    </div>

    <div class="post-info-more">
        <section class="post-tags"></section>
        <section class="print:!tw-hidden">
            <span><a href="javascript:void(0);" onclick="window.history.back();">Back</a></span>&nbsp;|&nbsp;<span><a href="/">Home</a></span>
        </section>
    </div>

    <div class="post-nav print:tw-hidden"><a href="/posts/paris-web-openid-connect-france-connect/" class="prev" rel="prev" title="Paris Web Openid Connect France Connect"><svg class="icon"
    xmlns="http://www.w3.org/2000/svg" viewBox="0 0 256 512"><!-- Font Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) --><path d="M31.7 239l136-136c9.4-9.4 24.6-9.4 33.9 0l22.6 22.6c9.4 9.4 9.4 24.6 0 33.9L127.9 256l96.4 96.4c9.4 9.4 9.4 24.6 0 33.9L201.7 409c-9.4 9.4-24.6 9.4-33.9 0l-136-136c-9.5-9.4-9.5-24.6-.1-34z"/></svg>Paris Web Openid Connect France Connect</a>
            <a href="/posts/writing-a-new-blog-with-hugo/" class="next" rel="next" title="Writing a New Blog With Hugo">Writing a New Blog With Hugo<svg class="icon"
    xmlns="http://www.w3.org/2000/svg" viewBox="0 0 256 512"><!-- Font Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) --><path d="M224.3 273l-136 136c-9.4 9.4-24.6 9.4-33.9 0l-22.6-22.6c-9.4-9.4-9.4-24.6 0-33.9l96.4-96.4-96.4-96.4c-9.4-9.4-9.4-24.6 0-33.9L54.3 103c9.4-9.4 24.6-9.4 33.9 0l136 136c9.5 9.4 9.5 24.6.1 34z"/></svg></a></div>
</div>
</article></div>
        </main><footer class="footer">
        <div class="footer-container"><div class="footer-line">
                    Powered by <a href="https://gohugo.io/" target="_blank" rel="noopener noreferrer" title="Hugo 0.124.1">Hugo</a>&nbsp;|&nbsp;Theme - <a href="https://github.com/HEIGE-PCloud/DoIt" target="_blank" rel="noopener noreferrer" title="DoIt 0.4.0"><svg class="icon"
    xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><!-- Font Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) --><path d="M402.3 344.9l32-32c5-5 13.7-1.5 13.7 5.7V464c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V112c0-26.5 21.5-48 48-48h273.5c7.1 0 10.7 8.6 5.7 13.7l-32 32c-1.5 1.5-3.5 2.3-5.7 2.3H48v352h352V350.5c0-2.1.8-4.1 2.3-5.6zm156.6-201.8L296.3 405.7l-90.4 10c-26.2 2.9-48.5-19.2-45.6-45.6l10-90.4L432.9 17.1c22.9-22.9 59.9-22.9 82.7 0l43.2 43.2c22.9 22.9 22.9 60 .1 82.8zM460.1 174L402 115.9 216.2 301.8l-7.3 65.3 65.3-7.3L460.1 174zm64.8-79.7l-43.2-43.2c-4.1-4.1-10.8-4.1-14.8 0L436 82l58.1 58.1 30.9-30.9c4-4.2 4-10.8-.1-14.9z"/></svg> DoIt</a>
                </div><div class="footer-line"><svg class="icon"
    xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!-- Font Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) --><path d="M256 8C119.033 8 8 119.033 8 256s111.033 248 248 248 248-111.033 248-248S392.967 8 256 8zm0 448c-110.532 0-200-89.451-200-200 0-110.531 89.451-200 200-200 110.532 0 200 89.451 200 200 0 110.532-89.451 200-200 200zm107.351-101.064c-9.614 9.712-45.53 41.396-104.065 41.396-82.43 0-140.484-61.425-140.484-141.567 0-79.152 60.275-139.401 139.762-139.401 55.531 0 88.738 26.62 97.593 34.779a11.965 11.965 0 0 1 1.936 15.322l-18.155 28.113c-3.841 5.95-11.966 7.282-17.499 2.921-8.595-6.776-31.814-22.538-61.708-22.538-48.303 0-77.916 35.33-77.916 80.082 0 41.589 26.888 83.692 78.277 83.692 32.657 0 56.843-19.039 65.726-27.225 5.27-4.857 13.596-4.039 17.82 1.738l19.865 27.17a11.947 11.947 0 0 1-1.152 15.518z"/></svg>2024<span class="author">&nbsp;<a href="/" target="_blank" rel="noopener noreferrer"></a></span></div>
            <div class="footer-line"></div>
            <div class="footer-line">
            </div>
        </div></footer></div>

    <div id="fixed-buttons" class="print:!tw-hidden"><a href="#back-to-top" id="back-to-top-button" class="fixed-button" title="Back to Top">
            <svg class="icon"
    xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!-- Font Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) --><path d="M34.9 289.5l-22.2-22.2c-9.4-9.4-9.4-24.6 0-33.9L207 39c9.4-9.4 24.6-9.4 33.9 0l194.3 194.3c9.4 9.4 9.4 24.6 0 33.9L413 289.4c-9.5 9.5-25 9.3-34.3-.4L264 168.6V456c0 13.3-10.7 24-24 24h-32c-13.3 0-24-10.7-24-24V168.6L69.2 289.1c-9.3 9.8-24.8 10-34.3.4z"/></svg>
        </a><a href="#" id="view-comments" class="fixed-button" title="View Comments">
            <svg class="icon"
    xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!-- Font Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) --><path d="M256 32C114.6 32 0 125.1 0 240c0 49.6 21.4 95 57 130.7C44.5 421.1 2.7 466 2.2 466.5c-2.2 2.3-2.8 5.7-1.5 8.7S4.8 480 8 480c66.3 0 116-31.8 140.6-51.4 32.7 12.3 69 19.4 107.4 19.4 141.4 0 256-93.1 256-208S397.4 32 256 32z"/></svg>
        </a>
    </div><div class="assets"><script type="text/javascript">window.config={"code":{"copyTitle":"Copy to clipboard","maxShownLines":10},"comment":{}};</script><script
    src="/lib/clipboard/clipboard.min.js"
    
  ></script><script
    src="/js/theme.min.js"
    
      defer
    
  ></script></div>
</body>

</html>
